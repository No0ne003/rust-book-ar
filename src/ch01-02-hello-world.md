## Hello, World!

الآن بعد أن قمت بتثبيت Rust، حان الوقت لكتابة أول برنامج بلغة Rust. من التقليدي عند تعلم لغة جديدة كتابة برنامج صغير يطبع النص `Hello, world!` على الشاشة، لذا سنقوم بنفس الشيء هنا!

> ملاحظة: هذا الكتاب يفترض أنك على دراية أساسية باستخدام سطر الأوامر. لا تضع Rust أي مطالب خاصة حول أدوات التحرير أو مكان تخزين الكود، لذا إذا كنت تفضل استخدام بيئة تطوير متكاملة (IDE) بدلاً من سطر الأوامر، فلا تتردد في استخدام IDE المفضل لديك. العديد من IDEs تدعم Rust الآن؛ تحقق من توثيق IDE لمزيد من التفاصيل. يركز فريق Rust على تمكين دعم رائع لـ Rust عبر `rust-analyzer`. راجع [الملحق D][devtools] للحصول على مزيد من التفاصيل.

### إنشاء مجلد للمشروع

ابدأ بإنشاء مجلد لتخزين كود Rust الخاص بك. لا تهم Rust مكان وجود الكود، ولكن من أجل التمارين والمشاريع في هذا الكتاب، نوصي بإنشاء مجلد *projects* في المجلد الرئيسي الخاص بك واحتفاظ بجميع مشاريعك هناك.

افتح terminal وأدخل الأوامر التالية لإنشاء مجلد *projects* و مجلد للمشروع "Hello, world!" داخل مجلد *projects*.

بالنسبة لـ Linux و macOS و PowerShell على Windows، أدخل:

```
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```


بالنسبة لـ Windows CMD، أدخل:

```
> mkdir "%USERPROFILE%\projects"
> cd /d "%USERPROFILE%\projects"
> mkdir hello_world
> cd hello_world
```

### كتابة وتشغيل برنامج Rust

بعد ذلك، أنشئ ملف مصدر جديد وسمه *main.rs*. دائمًا ما تنتهي ملفات Rust بالامتداد *.rs*. إذا كنت تستخدم أكثر من كلمة في اسم الملف، فإن العرف هو استخدام الشرطة السفلية للفصل بينها. على سبيل المثال، استخدم *hello_world.rs* بدلاً من *helloworld.rs*.

افتح الآن ملف *main.rs* الذي أنشأته وأدخل الكود في المثال 1-1.

<Listing number="1-1" file-name="main.rs" caption="برنامج يطبع `Hello, world!`">

```
fn main() {
    println!("Hello, world!");
}
```
</Listing>

احفظ الملف وارجع إلى نافذة terminal في دليل *~/projects/hello_world*. في Linux أو macOS، أدخل الأوامر التالية لتجميع وتشغيل الملف:

```
$ rustc main.rs
$ ./main
Hello, world!
```

على Windows، أدخل الأمر `./main.exe` بدلا من `./main`:

```
> rustc main.rs
> .\main.exe
Hello, world!
```

بغض النظر عن نظام التشغيل الخاص بك، يجب أن تتم طباعة السلسلة النصية (string) `Hello, world!` في terminal. إذا لم ترى هذا الإخراج، ارجع إلى الجزء الخاص بـ 
[“استكشاف الأخطاء وإصلاحها”][troubleshooting] للحصول على طرق للحصول على المساعدة.

إذا تمت طباعة `Hello, world!`، تهانينا! لقد كتبت برنامج Rust رسميًا. هذا يجعلك مبرمج Rust—مرحبًا بك!

### هيكلية برنامج Rust

لنراجع هذا البرنامج “Hello, world!” بالتفصيل. إليك الجزء الأول من اللغز:

```rust
fn main() {

}
```

تحدد هذه الأسطر دالة تسمى `main`. دالة `main` مميزة: فهي دائمًا أول كود يتم تشغيله في كل برنامج Rust تنفيذي. هنا، السطر الأول يعلن عن دالة تسمى `main` ليس لها parameters ولا تُرجع أي شيء. إذا كانت هناك parameters، فسيتم وضعها داخل الأقواس `()`.

جسم الدالة محاط بـ `{}`. يتطلب Rust الأقواس المعقفة حول جميع أجسام الدوال. من الأفضل وضع القوس المعقوف المفتوح في نفس السطر مع إعلان الدالة، مع إضافة مسافة واحدة بينهما.

> ملاحظة: إذا كنت ترغب في الالتزام بأسلوب قياسي عبر مشاريع Rust، يمكنك استخدام أداة تنسيق تلقائي تسمى `rustfmt` لتنسيق الكود الخاص بك بأسلوب معين (المزيد عن `rustfmt` في 
> [الملحق D][devtools]). قام فريق Rust بتضمين هذه الأداة مع توزيع Rust القياسي، مثلما فعل مع `rustc`، لذا من المفترض أن تكون مثبتة بالفعل على جهازك!

جسم دالة `main` يحتوي على الكود التالي:

```rust
println!("Hello, world!");
```

هذا السطر يقوم بكل العمل في هذا البرنامج الصغير: فهو يطبع النص على الشاشة. هناك أربعة تفاصيل هامة يجب ملاحظتها هنا.

أولاً، أسلوب Rust هو التحديد باستخدام أربع مسافات، وليس التاب.

ثانيًا، `!println` يستدعي ماكرو في Rust. إذا كانت قد استدعة دالة بدلاً من ذلك، لكانت تكتب `println` (بدون `!`). سنتناول ماكروهات Rust بمزيد من التفصيل في الفصل 20. في الوقت الحالي، يجب أن تعرف أن استخدام `!` يعني أنك تستدعي ماكروًا بدلاً من دالة عادية وأن الماكروهات لا تتبع دائمًا نفس القواعد مثل الدوال.

ثالثًا، ترى السلسلة النصية `"Hello, world!"`. نمرر هذه السلسلة كمعامل لـ `println!`، ويتم طباعتها على الشاشة.

رابعًا، ننهي السطر بفاصلة منقوطة (`;`)، مما يشير إلى أن هذه العبارة انتهت وأن العبارة التالية جاهزة للبدء. معظم الأسطر في كود Rust تنتهي بفاصلة منقوطة.

### التجميع والتشغيل هما خطوات منفصلة

لقد قمت لتوِّك بتشغيل برنامج تم إنشاؤه حديثًا، فلنستعرض كل خطوة في العملية.

قبل تشغيل برنامج Rust، يجب أن تقوم بتجميعه باستخدام مترجم (compiler) Rust عن طريق إدخال أمر `rustc` وتمرير اسم ملف المصدر، مثل هذا:

```bash
$ rustc main.rs
```

إذا كان لديك خلفية عن C أو C++، ستلاحظ أن هذا مشابه لأوامر `gcc` أو `clang`. بعد التجميع بنجاح، يقوم Rust بإخراج ملف تنفيذي ثنائي.

على Linux و macOS و PowerShell على Windows، يمكنك رؤية الملف التنفيذي عن طريق إدخال أمر `ls` في سطر الأوامر:

```
$ ls
main  main.rs
```

على Linux و macOS، سترى ملفين. باستخدام PowerShell على Windows، سترى نفس الملفات الثلاثة التي سترىها باستخدام CMD. باستخدام CMD على Windows، يجب أن تدخل:

```
> dir /B %= الخيار /B يعرض فقط أسماء الملفات =%
main.exe
main.pdb
main.rs
```

يُظهر هذا ملف الكود المصدر مع الامتداد *.rs*، والملف التنفيذي (*main.exe* على Windows، ولكن *main* على الأنظمة الأخرى)، وعند استخدام Windows، ملف يحتوي على معلومات تصحيح الأخطاء مع الامتداد *.pdb*. من هنا، تقوم بتشغيل الملف *main* أو *main.exe*، مثل هذا:

```
$ ./main # أو .\main.exe على Windows
```

إذا كان ملف *main.rs* هو برنامج "Hello, world!" الخاص بك، فسيطبع هذا السطر `Hello, world!` على الطرفية.

إذا كنت أكثر دراية بلغة ديناميكية، مثل Ruby أو Python أو JavaScript، قد لا تكون معتادًا على تجميع وتشغيل البرنامج كخطوتين منفصلتين. Rust هي لغة *مترجمة مسبقًا*، مما يعني أنه يمكنك تجميع برنامج وإعطاء الملف التنفيذي لشخص آخر، ويمكنه تشغيله حتى بدون تثبيت Rust. إذا أعطيت شخصًا ما ملفًا *.rb* أو *.py* أو *.js*، فهو بحاجة إلى تثبيت تنفيذ Ruby أو Python أو JavaScript (على التوالي). ولكن في هذه اللغات، تحتاج إلى أمر واحد فقط لتجميع وتشغيل البرنامج. كل شيء هو تنازل في تصميم اللغة.

ببساطة التجميع باستخدام `rustc` جيد للبرامج البسيطة، ولكن مع نمو مشروعك، ستحتاج إلى إدارة جميع الخيارات وجعل الأمر سهلاً لمشاركة الكود. في القسم التالي، سنقدم لك أداة Cargo، التي ستساعدك على كتابة برامج Rust الحقيقية.

[troubleshooting]: ch01-01-installation.html#troubleshooting
[devtools]: appendix-04-useful-development-tools.html

